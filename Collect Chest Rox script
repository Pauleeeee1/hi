print("made with love♥️")

local function ROX()
	wait(1)
	repeat wait() until game:IsLoaded()

	local Workspace = game:GetService("Workspace")
	local Players = game:GetService("Players")
	local HttpService = game:GetService("HttpService")
	local TeleportService = game:GetService("TeleportService")

	local player = Players.LocalPlayer
	local maxAttempts = 5
	local waitTime = 2

	_G.DebugPrint = true  -- Enable debug printing

	local function debugPrint(...)
		if _G.DebugPrint then
			print("[DEBUG]", ...)
		end
	end

	local function GetHumanoid()
		local Player = Players.LocalPlayer
		local Character = Player.Character or Player.CharacterAdded:Wait()
		local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
		local Humanoid = Character:WaitForChild("Humanoid")

		if Humanoid and HumanoidRootPart and Humanoid.Health > 1 then
			debugPrint("Found Humanoid")
			return Humanoid, HumanoidRootPart
		else
			debugPrint("Humanoid or HumanoidRootPart not found")
			return nil, nil
		end
	end

	local function GetChestFolder()
		for _, child in ipairs(Workspace:GetChildren()) do
			if child.Name == "Components" and not child:FindFirstChild("AfkZones") then
				debugPrint("Found ChestFolder")
				return child
			end
		end
		debugPrint("ChestFolder not found")
		return nil
	end

	local function collectchest()
		for i = 1, 12 do
			game:GetService("ReplicatedStorage"):WaitForChild("SharedModules"):WaitForChild("Knit"):WaitForChild("Services"):WaitForChild("PlayTimeRewardService"):WaitForChild("RF"):WaitForChild("claim"):InvokeServer(i)
			debugPrint("Claimed PlayTimeReward for index", i)
		end
		local ChestFolder = GetChestFolder()
		if not ChestFolder then
			debugPrint("ChestFolder not found, cannot collect chests")
			return
		end

		for _, crate in ipairs(ChestFolder:GetChildren()) do
			local LootCrate = crate:FindFirstChild("LootCrate")
			if LootCrate then
				local RF = LootCrate:FindFirstChild("RF")
				if RF then
					local open = RF:FindFirstChild("open")
					if open then
						open:InvokeServer()
						debugPrint("Opened LootCrate:", crate.Name)
					else
						debugPrint("No 'open' method found in LootCrate:", crate.Name)
					end
				else
					debugPrint("No 'RF' found in LootCrate:", crate.Name)
				end
			else
				debugPrint("No 'LootCrate' found in crate:", crate.Name)
			end
		end
	end

	local function getObject()
		local objects = {
			workspace:WaitForChild("Camera"), workspace:WaitForChild("Terrain"), workspace:WaitForChild("BoostPads"), workspace:WaitForChild("Components"),
			workspace:WaitForChild("Gifts"), workspace:WaitForChild("InteriorDoors"), workspace:WaitForChild("Lobby"), workspace:WaitForChild("Music"), workspace:WaitForChild("Npcs"),
			workspace:WaitForChild("Pets_TowerPetSpawner"), workspace:WaitForChild("Pillars"), workspace:WaitForChild("Sounds"), workspace:WaitForChild("TowerSummoningPads"),
			workspace:WaitForChild("WorldTeleports"), workspace:WaitForChild("Main"), workspace:WaitForChild("Grass"), workspace:WaitForChild("Collision"),
			workspace:WaitForChild("InteractStore"), workspace:WaitForChild("Part"), workspace:WaitForChild("TouchStore"),
		}
		return objects
	end

	local function allObjectsLoaded(objects)
		for i, obj in ipairs(objects) do
			if not obj then
				debugPrint("Object " .. i .. " is not loaded yet.")
				return false
			else
				debugPrint("Object " .. i .. " is loaded: " .. tostring(obj))
			end
		end
		return true
	end

	local objects = getObject()
	repeat
		wait(0.1)
		debugPrint("Waiting for all objects to load...")
		for i, obj in ipairs(objects) do
			debugPrint("Object " .. i .. ": " .. tostring(obj))
		end
	until allObjectsLoaded(objects)

	debugPrint("All objects are loaded!")
	wait()

	local Humanoid, HumanoidRootPart = GetHumanoid()
	if Humanoid then
		Humanoid.Health = 0
		debugPrint("Set Humanoid Health to 0")
	end
	wait()

	Humanoid, HumanoidRootPart = GetHumanoid()
	if Humanoid then
		debugPrint("Humanoid found after respawn!")
	else
		repeat
			wait(0.1)
			Humanoid, HumanoidRootPart = GetHumanoid()
		until Humanoid
		debugPrint("Humanoid found after waiting!")
	end

	collectchest()
	wait()

	local function attemptServerHop()
		debugPrint("Attempting server hop...")

		local placeId = game.PlaceId
		local serversApi = "https://games.roblox.com/v1/games/" .. placeId .. "/servers/Public?sortOrder=Asc&limit=100"
		local nextPageCursor = nil
		local currentJobId = game.JobId

		local function listServers(cursor)
			local url = serversApi
			if cursor then
				url = url .. "&cursor=" .. cursor
			end

			local response = HttpService:JSONDecode(game:HttpGet(url))
			return response
		end

		local availableServers = {}

		repeat
			local serverList = listServers(nextPageCursor)
			if serverList and serverList.data then
				for _, server in ipairs(serverList.data) do
					if server.playing < server.maxPlayers and server.id ~= currentJobId then
						table.insert(availableServers, server)
					end
				end
				nextPageCursor = serverList.nextPageCursor
			end
		until not nextPageCursor

		if #availableServers > 0 then
			local randomServer = availableServers[math.random(#availableServers)]
			local success, errorMessage = pcall(function()
				TeleportService:TeleportToPlaceInstance(placeId, randomServer.id, player)
			end)
			if success then
				debugPrint("Successfully hopped to server")
				return true
			else
				debugPrint("Teleport failed: " .. errorMessage)
				return false
			end
		else
			debugPrint("No suitable server found to teleport.")
			return false
		end
	end

	local serverHopped = false
	for attempt = 1, maxAttempts do
		serverHopped = attemptServerHop()
		if serverHopped then
			break
		end
		wait(waitTime)
		debugPrint("Retrying server hop... Attempt: " .. attempt)
	end

	if not serverHopped then
		debugPrint("No suitable server found or no cubes left after multiple attempts, performing alternative action...")
		-- Insert your alternative action here if needed
	end
end

print("Access granted.")
ROX()
